<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ELDEN RING NIGNTREIGN 遺物組み合わせ(ビルド)探索ツール</title>
<meta name="description" content="ELDEN RING NIGHTREIGN（ナイトレイン）の遺物を登録し、欲しい効果をできる限り実現できる組み合わせを探索するためのツール。">
<meta name="keywords" content="ELDEN RING NIGHTREIGN,ナイトレイン,NIGHTREIGN,遺物,Relic,Relics,シミュレーター,ビルド,探索,組み合わせ,最適化">
<meta name="robots" content="index, follow">
<!-- favicon -->
<link rel="icon" type="image/png" href="favicon/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/svg+xml" href="favicon/favicon.svg">
<link rel="shortcut icon" href="favicon/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
<meta name="apple-mobile-web-app-title" content="Nightreign Relic Simulator">
<link rel="manifest" href="favicon/site.webmanifest">

<!-- canonical -->
<link rel="canonical" href="https://17number.github.io/enr-relics-simulator/">

<!-- 構造化データ -->
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "ENR Relics Simulator",
    "url": "https://17number.github.io/enr-relics-simulator/",
    "applicationCategory": "Utility",
    "operatingSystem": "Web",
    "description": "ELDEN RING NIGHTREIGN の遺物を登録し、欲しい効果を実現できる組み合わせを探索するウェブツール。",
    "author": {
      "@type": "Person",
      "name": "17number"
    }
  }
</script>

<!-- goat counter -->
<script data-goatcounter="https://enr-relics-simulator.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
<!-- JSON5 for browser -->
<script src="https://cdn.jsdelivr.net/npm/json5@2.2.3/dist/index.min.js"></script>
<!-- Tom Select -->
<link href="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/css/tom-select.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/js/tom-select.complete.min.js"></script>
<!-- Paraparse -->
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.5.3/papaparse.min.js"></script>
<!-- fuse.js -->
<script src="https://cdn.jsdelivr.net/npm/fuse.js@7.1.0/dist/fuse.min.js"></script>
<!-- ULID -->
<script src="https://cdn.jsdelivr.net/npm/ulid@2.4.0/dist/index.umd.min.js"></script>
<!-- dayjs -->
<script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
<!-- Tonejs -->
<script src="https://cdn.jsdelivr.net/npm/tone@15.1.22/build/Tone.min.js"></script>
<!-- d3-array -->
<script src="https://cdn.jsdelivr.net/npm/d3-array@3.2.4/dist/d3-array.min.js"></script>
<!-- tingle -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tingle.js@0.15.3/dist/tingle.min.css" />
<script src="https://cdn.jsdelivr.net/npm/tingle.js@0.15.3/dist/tingle.min.js"></script>

<link rel="stylesheet" href="./index.css" />
</head>
<body>
<h1>ELDEN RING NIGNTREIGN 遺物組み合わせ(ビルド)探索ツール</h1>

<!-- ▼ タブヘッダー -->
<div class="tab-header">
  <button class="tab-btn" data-tab="searchTab">ビルド探索</button>
  <button class="tab-btn" data-tab="inventoryTab">所持遺物</button>
  <button class="tab-btn" data-tab="usageTab">使い方</button>
</div>

<div class="tab-content" id="searchTab">
  <div class="row">
    <div class="panel" style="flex:1 1 360px">
      <div class="demo-toggle">
        <input id="demoSwitch1" class="switch-input" type="checkbox" />
        <label for="demoSwitch1" class="switch" aria-hidden="true">
          <span class="switch-knob"></span>
        </label>
        <span id="demoSwitchLabel" class="switch-label">デモモード: <strong id="demoSwitchStatus">OFF</strong></span>
      </div>
      <label class="heading">1: キャラクターを選択</label>
      <div id="characterList" class="character-grid"></div>
      <hr />

      <label class="heading">2: 欲しい遺物効果（最大18件）</label>
      <div style="margin-bottom:8px">
        <button id="addDesiredBtn" class="btn-secondary">＋ 効果を追加</button>
        <button id="resetDesiredBtn" class="btn-secondary">リセット</button>
      </div>
      <div id="desiredList"></div>
      <div style="margin-bottom:8px">
        <button id="addDesiredBtn" class="btn-secondary">＋ 効果を追加</button>
        <button id="resetDesiredBtn" class="btn-secondary">リセット</button>
      </div>
      <hr />

      <label class="heading">3: 除外したいデメリット効果</label>
      <div style="margin-bottom:8px">
        <button id="addExcludedBtn" class="btn-secondary">＋ 除外デメリットを追加</button>
        <button id="resetExcludedBtn" class="btn-secondary">リセット</button>
      </div>
      <div id="excludedList"></div>
      <div style="margin-bottom:8px">
        <button id="addExcludedBtn" class="btn-secondary">＋ 除外デメリットを追加</button>
        <button id="resetExcludedBtn" class="btn-secondary">リセット</button>
      </div>
      <hr />

      <label class="heading">4: 実行</label>
      <div style="margin-top:8px;display:flex;gap:8px">
        <button id="searchBtn" class="btn-primary">探索開始</button>
        <button id="clearResultsBtn" class="btn-secondary">結果クリア</button>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="panel" style="flex:1 1 360px">
      <label>探索結果</label>
      <div id="statusArea" class="muted"></div>
      <div id="resultsArea" class="muted">まだ探索していません</div>
    </div>
  </div>
</div>

<div class="tab-content" id="inventoryTab">
  <div class="row">
    <div class="panel" style="flex:1 1 360px">
      <div class="demo-toggle">
        <input id="demoSwitch2" class="switch-input" type="checkbox" />
        <label for="demoSwitch2" class="switch" aria-hidden="true">
          <span class="switch-knob"></span>
        </label>
        <span id="demoSwitchLabel" class="switch-label">デモモード: <strong id="demoSwitchStatus">OFF</strong></span>
      </div>
      <label>所持遺物（ユーザー登録・検索）</label>
      <div id="inventoryHeader">
        <input id="inventorySearch" placeholder="ID/効果名/かな/色(r/g/b/y)/大きさ(s/m/l)/遺物種類(n/d)を検索" style="flex:1" />
        <button id="openAddRelic" class="btn-secondary">＋ 所持遺物を登録</button>
        <button id="deleteRelics" class="btn-secondary" disabled>チェック済を削除</button>
      </div>
      <div id="inventoryList" class="muted">所持遺物読み込み中...</div>
    </div>
  </div>
</div>

<div class="tab-content" id="usageTab">
  <div class="panel">
    <h3>ツール概要</h3>
    <p>
      本ツールは <strong>ELDEN RING NIGHTREIGN</strong> に登場する「遺物」を登録し、<br>
      <strong>欲しい効果をできる限り実現できる組み合わせ</strong> を探索するための支援ツールです。<br>
      まずは「<strong>デモモード</strong>」でお気軽にお試しください。「ビルド探索」タブ、「所持遺物」タブのすぐ下にあるスイッチで ON/OFF を切り替えられます。<br>
      デモモードでは、ツール制作者の所持遺物からランダムに選ばれた300件を使用して探索を体験できます。
    </p>

    <h4>使い方</h4>
    <ol>
      <li>
        <a href="https://github.com/17number/enr-relics-importer" target="_blank" rel="noopener">
          別ツール（enr-relics-importer）
        </a>
        を使用して、所持遺物の一覧 CSV を作成します。
      </li>
      <li>
        「<strong>所持遺物</strong>」タブの「<strong>＋ 所持遺物を登録</strong>」ボタンから遺物一覧を登録します。
        <ul>
          <li>初回は「上書き登録」を選択してください。</li>
          <li>2回目以降に差分のみ追加したい場合は「先頭に追加」または「末尾に追加」を選択できます。</li>
        </ul>
      </li>
      <li>
        「<strong>ビルド探索</strong>」タブで、キャラクター・欲しい遺物効果・除外したいデメリット効果 を指定して探索を実行します。<br>
        条件に合う(または近しい)組み合わせを自動的に検索します。
      </li>
    </ol>

    <h4>注意事項</h4>
    <ul>
      <li><strong>必ず最適な組み合わせが見つかる保証はありません。</strong></li>
      <li><strong>データの送信や外部通信は行っていません</strong>が、<br>
          心配な方はご利用をお控えください（自己責任でお願いします）。</li>
      <li>対応言語は日本語のみです。</li>
      <li>欲しい効果を増やすほど探索時間が長くなります。最初は少数の効果で試すのをおすすめします。</li>
      <li>
        上位互換効果の採用や、通常遺物の代わりに深層遺物側で代用には<strong>非対応</strong>です。<br>
        (例: 「物理攻撃力上昇＋２」を指定しても「＋４」を採用したり、通常側で指定した「短剣の攻撃力上昇」を深層側で採用したりはしません)
      </li>
      <li>探索にかかる時間・速度はご利用のPCスペックに依存します。</li>
    </ul>

    <h4>その他</h4>
    <ul>
      <li>「所持遺物」タブでは、登録済みの遺物一覧を検索・管理できます。</li>
      <li>登録データはブラウザ内に保存されます（リロードや再訪問時にも復元されます）。</li>
      <li>デモモードの遺物は、ON/OFF を切り替えるたびにランダムに選出されます。</li>
      <li>ツールは個人制作の非公式ファンツールです。ゲーム公式・運営元とは一切関係ありません。</li>
      <li>ビルド画像を生成するための別ツール(<a href="https://17number.github.io/enr-relics-merger/" target="_blank" rel="noopener">ELDEN RING NIGHTREIGN 遺物画像結合ツール</a>)もぜひご利用ください。</li>
    </ul>

    <p style="margin-top:16px;font-size:0.9em" class="muted">
      © FromSoftware / Bandai Namco Entertainment Inc.<br>
      本ツールは非公式ツールです。
    </p>
  </div>
</div>

<!-- Add relic modal (simple) -->
<div id="importRelicsModal" style="">
  <div style="background:#fff;padding:12px;border-radius:8px;width:80vw;box-shadow:0 6px 20px rgba(0,0,0,0.25)">
    <h3 style="margin-top:0">遺物をCSVからインポート</h3>
    <p class="muted">
      <a href="#" onclick="closeRelicModal(); document.querySelector(`[data-tab='usageTab']`).click(); return false;">使い方</a>に記載されている方法で CSV を作成して選択してください。
    </p>
    <div style="display:flex;gap:8px;flex-direction:column">
      <input type="file" name="relicsCsv" id="relicsCsv" accept=".csv">
      <button id="importCsvOverwrite" data-import-mode="overwrite">上書き登録</button>
      <button id="importCsvAppendStart" data-import-mode="append-start">先頭に追加</button>
      <button id="importCsvAppendEnd" data-import-mode="append-end">末尾に追加</button>
      <button id="r_cancel" class="btn-secondary">キャンセル</button>
    </div>
  </div>
</div>

<footer style="font-size: 0.9em; margin-top: 1rem; text-align: center;">
  <a href="privacy.html" style="padding: 0; margin: 0;">プライバシーポリシー</a>
  <div id="version" style="color: #666;"></div>
</footer>

<script src="./index.js"></script>
</body>
</html>
